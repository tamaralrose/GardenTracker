<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garden Tracker</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Crimson Pro', Georgia, serif;
        }
        select {
            background: #ffffff !important;
            color: #000000 !important;
        }
        select option {
            background: #ffffff !important;
            color: #000000 !important;
        }
        input[type="date"],
        input[type="text"],
        input[type="number"] {
            background: rgba(255, 255, 255, 0.9) !important;
            color: #000000 !important;
        }
        textarea {
            background: rgba(255, 255, 255, 0.9) !important;
            color: #000000 !important;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide icons as inline SVG components
        const Plus = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Download = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
        );

        const Calendar = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        );

        const Sprout = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M7 20h10"></path>
                <path d="M10 20c5.5-2.5.8-6.4 3-10"></path>
                <path d="M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z"></path>
                <path d="M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z"></path>
            </svg>
        );

        const Grid3x3 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="9" y1="3" x2="9" y2="21"></line>
                <line x1="15" y1="3" x2="15" y2="21"></line>
                <line x1="3" y1="9" x2="21" y2="9"></line>
                <line x1="3" y1="15" x2="21" y2="15"></line>
            </svg>
        );

        const Trash2 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Edit2 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
            </svg>
        );

        const Check = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );

        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const Copy = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
        );

        function GardenTracker() {
          const [plants, setPlants] = useState([]);
          const [lastFrostDate, setLastFrostDate] = useState('2025-05-15');
          const [plot1Size, setPlot1Size] = useState(15);
          const [plot2Size, setPlot2Size] = useState(15);
          const [showAddForm, setShowAddForm] = useState(false);
          const [view, setView] = useState('table');
          const [editingId, setEditingId] = useState(null);

          useEffect(() => {
            const saved = localStorage.getItem('gardenTrackerData');
            if (saved) {
              const data = JSON.parse(saved);
              setPlants(data.plants || []);
              setLastFrostDate(data.lastFrostDate || '2025-05-15');
              setPlot1Size(data.plot1Size || 15);
              setPlot2Size(data.plot2Size || 15);
            }
          }, []);

          useEffect(() => {
            localStorage.setItem('gardenTrackerData', JSON.stringify({
              plants,
              lastFrostDate,
              plot1Size,
              plot2Size
            }));
          }, [plants, lastFrostDate, plot1Size, plot2Size]);

          const addPlant = (plant) => {
            setPlants([...plants, { ...plant, id: Date.now() }]);
            setShowAddForm(false);
          };

          const updatePlant = (id, updates) => {
            setPlants(plants.map(p => p.id === id ? { ...p, ...updates } : p));
          };

          const deletePlant = (id) => {
            setPlants(plants.filter(p => p.id !== id));
          };

          const copyPlant = (plant) => {
            const newPlant = {
              ...plant,
              id: Date.now(),
              name: plant.name + ' (Copy)',
              actualDateSownIndoors: '',
              actualDateTransplanted: '',
              actualDirectSownDate: '',
              secondSowingActual: '',
              thirdSowingActual: ''
            };
            setPlants([...plants, newPlant]);
          };

          const calculateDate = (baseDate, daysToAdd) => {
            if (!baseDate) return '';
            const date = new Date(baseDate);
            date.setDate(date.getDate() + daysToAdd);
            return date.toISOString().split('T')[0];
          };

          const getPlantingDate = (beforeAfter) => {
            if (!lastFrostDate) return '';
            const frost = new Date(lastFrostDate);
            if (beforeAfter === 'Before') {
              frost.setDate(frost.getDate() - 14);
            } else if (beforeAfter === 'After') {
              frost.setDate(frost.getDate() + 7);
            }
            return frost.toISOString().split('T')[0];
          };

          const getBloomDate = (plant) => {
            const baseDate = plant.actualDateTransplanted || plant.actualDirectSownDate;
            if (!baseDate || !plant.daysToBloom) return '';
            return calculateDate(baseDate, parseInt(plant.daysToBloom));
          };

          const totalSpaceUsed = plants.reduce((sum, p) => sum + (parseFloat(p.spaceNeeded) || 0), 0);
          const totalSpace = plot1Size + plot2Size;

          const exportToExcel = async () => {
            const XLSX = await import('https://cdn.sheetjs.com/xlsx-0.20.1/package/xlsx.mjs');
            
            const data = plants.map(p => ({
              'Plant Name': p.name,
              'Variety': p.variety || '',
              'Date to Sow Indoors': p.dateToSowIndoors || '',
              'Actual Date Sown Indoors': p.actualDateSownIndoors || '',
              'Date to Transplant': p.dateToTransplant || '',
              'Actual Date Transplanted': p.actualDateTransplanted || '',
              'Date to Direct Sow': p.dateToDirectSow || '',
              'Actual Direct Sown Date': p.actualDirectSownDate || '',
              'Days to Bloom': p.daysToBloom || '',
              'Space Needed (inches)': p.spaceNeeded || '',
              'Plant Before/After Frost': p.beforeAfterFrost || '',
              'Height at Maturity (in)': p.heightAtMaturity || '',
              'Estimated Bloom Date': getBloomDate(p),
              'When to Plant': getPlantingDate(p.beforeAfterFrost),
              'Plot Assignment': p.plotAssignment || '',
              'Succession Sowing?': p.successionSowing || '',
              '2nd Sowing (Planned)': p.actualDirectSownDate && p.successionSowing === 'Yes' ? calculateDate(p.actualDirectSownDate, 7) : '',
              '2nd Sowing (Actual)': p.secondSowingActual || '',
              '3rd Sowing (Planned)': p.actualDirectSownDate && p.successionSowing === 'Yes' ? calculateDate(p.actualDirectSownDate, 14) : '',
              '3rd Sowing (Actual)': p.thirdSowingActual || '',
              'Notes': p.notes || ''
            }));

            const ws = XLSX.utils.json_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Garden Tracker');
            XLSX.writeFile(wb, 'garden_tracker.xlsx');
          };

          return (
            <div style={{
              minHeight: '100vh',
              background: 'linear-gradient(135deg, #1a3a1a 0%, #2d5a2d 50%, #4a7c4a 100%)',
              fontFamily: '"Crimson Pro", Georgia, serif',
              color: '#f0f4f0',
              padding: '2rem'
            }}>
              <div style={{ maxWidth: '1600px', margin: '0 auto' }}>
                {/* Header */}
                <header style={{
                  background: 'rgba(255, 255, 255, 0.05)',
                  backdropFilter: 'blur(10px)',
                  borderRadius: '20px',
                  padding: '2rem',
                  marginBottom: '2rem',
                  border: '2px solid rgba(144, 238, 144, 0.2)',
                  boxShadow: '0 8px 32px rgba(0, 0, 0, 0.3)'
                }}>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>
                    <Sprout size={48} style={{ color: '#90ee90' }} />
                    <h1 style={{
                      fontSize: '3rem',
                      margin: 0,
                      fontWeight: 600,
                      background: 'linear-gradient(135deg, #90ee90, #98fb98)',
                      WebkitBackgroundClip: 'text',
                      WebkitTextFillColor: 'transparent',
                      letterSpacing: '-0.02em'
                    }}>
                      Garden Tracker
                    </h1>
                  </div>

                  <div style={{
                    display: 'grid',
                    gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',
                    gap: '1rem',
                    marginBottom: '1.5rem'
                  }}>
                    <div>
                      <label style={{ display: 'block', marginBottom: '0.5rem', fontSize: '0.9rem', color: '#90ee90' }}>
                        Last Frost Date
                      </label>
                      <input
                        type="date"
                        value={lastFrostDate}
                        onChange={(e) => setLastFrostDate(e.target.value)}
                        style={{
                          width: '100%',
                          padding: '0.75rem',
                          background: 'rgba(255, 255, 255, 0.1)',
                          border: '1px solid rgba(144, 238, 144, 0.3)',
                          borderRadius: '8px',
                          color: '#f0f4f0',
                          fontSize: '1rem'
                        }}
                      />
                    </div>
                    <div>
                      <label style={{ display: 'block', marginBottom: '0.5rem', fontSize: '0.9rem', color: '#90ee90' }}>
                        Plot 1 (3Ã—5) sq ft
                      </label>
                      <input
                        type="number"
                        value={plot1Size}
                        onChange={(e) => setPlot1Size(parseFloat(e.target.value) || 0)}
                        style={{
                          width: '100%',
                          padding: '0.75rem',
                          background: 'rgba(255, 255, 255, 0.1)',
                          border: '1px solid rgba(144, 238, 144, 0.3)',
                          borderRadius: '8px',
                          color: '#f0f4f0',
                          fontSize: '1rem'
                        }}
                      />
                    </div>
                    <div>
                      <label style={{ display: 'block', marginBottom: '0.5rem', fontSize: '0.9rem', color: '#90ee90' }}>
                        Plot 2 sq ft
                      </label>
                      <input
                        type="number"
                        value={plot2Size}
                        onChange={(e) => setPlot2Size(parseFloat(e.target.value) || 0)}
                        style={{
                          width: '100%',
                          padding: '0.75rem',
                          background: 'rgba(255, 255, 255, 0.1)',
                          border: '1px solid rgba(144, 238, 144, 0.3)',
                          borderRadius: '8px',
                          color: '#f0f4f0',
                          fontSize: '1rem'
                        }}
                      />
                    </div>
                  </div>

                  <div style={{
                    display: 'flex',
                    gap: '2rem',
                    padding: '1rem',
                    background: 'rgba(144, 238, 144, 0.1)',
                    borderRadius: '12px',
                    fontSize: '1.1rem'
                  }}>
                    <div>
                      <span style={{ color: '#90ee90' }}>Space Used:</span>{' '}
                      <strong>{totalSpaceUsed.toFixed(1)} inches</strong>
                    </div>
                    <div>
                      <span style={{ color: '#90ee90' }}>Plot Space Remaining:</span>{' '}
                      <strong>{(totalSpace - totalSpaceUsed).toFixed(1)} sq ft</strong>
                    </div>
                  </div>
                </header>

                {/* Action Bar */}
                <div style={{
                  display: 'flex',
                  gap: '1rem',
                  marginBottom: '2rem',
                  flexWrap: 'wrap'
                }}>
                  <button
                    onClick={() => setShowAddForm(true)}
                    style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '0.5rem',
                      padding: '0.75rem 1.5rem',
                      background: '#90ee90',
                      color: '#1a3a1a',
                      border: 'none',
                      borderRadius: '12px',
                      fontSize: '1rem',
                      fontWeight: 600,
                      cursor: 'pointer',
                      transition: 'all 0.3s',
                      boxShadow: '0 4px 12px rgba(144, 238, 144, 0.3)'
                    }}
                  >
                    <Plus size={20} /> Add Plant
                  </button>
                  <button
                    onClick={exportToExcel}
                    style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '0.5rem',
                      padding: '0.75rem 1.5rem',
                      background: 'rgba(255, 255, 255, 0.1)',
                      color: '#f0f4f0',
                      border: '1px solid rgba(144, 238, 144, 0.3)',
                      borderRadius: '12px',
                      fontSize: '1rem',
                      fontWeight: 600,
                      cursor: 'pointer',
                      transition: 'all 0.3s'
                    }}
                  >
                    <Download size={20} /> Export to Excel
                  </button>
                  <button
                    onClick={() => setView(view === 'table' ? 'calendar' : 'table')}
                    style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '0.5rem',
                      padding: '0.75rem 1.5rem',
                      background: 'rgba(255, 255, 255, 0.1)',
                      color: '#f0f4f0',
                      border: '1px solid rgba(144, 238, 144, 0.3)',
                      borderRadius: '12px',
                      fontSize: '1rem',
                      fontWeight: 600,
                      cursor: 'pointer',
                      transition: 'all 0.3s'
                    }}
                  >
                    {view === 'table' ? <Calendar size={20} /> : <Grid3x3 size={20} />}
                    {view === 'table' ? 'Calendar View' : 'Table View'}
                  </button>
                </div>

                {/* Add Plant Form */}
                {showAddForm && (
                  <AddPlantForm onAdd={addPlant} onCancel={() => setShowAddForm(false)} />
                )}

                {/* Views */}
                {view === 'table' ? (
                  <TableView
                    plants={plants}
                    onUpdate={updatePlant}
                    onDelete={deletePlant}
                    onCopy={copyPlant}
                    getBloomDate={getBloomDate}
                    getPlantingDate={getPlantingDate}
                    calculateDate={calculateDate}
                    editingId={editingId}
                    setEditingId={setEditingId}
                  />
                ) : (
                  <CalendarView
                    plants={plants}
                    getBloomDate={getBloomDate}
                    getPlantingDate={getPlantingDate}
                  />
                )}
              </div>
            </div>
          );
        }

        function AddPlantForm({ onAdd, onCancel }) {
          const [formData, setFormData] = useState({
            name: '',
            variety: '',
            dateToSowIndoors: '',
            actualDateSownIndoors: '',
            dateToTransplant: '',
            actualDateTransplanted: '',
            dateToDirectSow: '',
            actualDirectSownDate: '',
            daysToBloom: '',
            spaceNeeded: '',
            beforeAfterFrost: 'After',
            heightAtMaturity: '',
            plotAssignment: '',
            successionSowing: 'No',
            secondSowingActual: '',
            thirdSowingActual: '',
            notes: ''
          });

          const handleSubmit = (e) => {
            e.preventDefault();
            onAdd(formData);
          };

          return (
            <div style={{
              background: 'rgba(255, 255, 255, 0.05)',
              backdropFilter: 'blur(10px)',
              borderRadius: '20px',
              padding: '2rem',
              marginBottom: '2rem',
              border: '2px solid rgba(144, 238, 144, 0.2)',
              boxShadow: '0 8px 32px rgba(0, 0, 0, 0.3)'
            }}>
              <h2 style={{ marginTop: 0, color: '#90ee90', fontSize: '1.8rem' }}>Add New Plant</h2>
              <form onSubmit={handleSubmit}>
                <div style={{
                  display: 'grid',
                  gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
                  gap: '1.5rem',
                  marginBottom: '1.5rem'
                }}>
                  <FormField label="Plant Name *" required>
                    <input
                      type="text"
                      required
                      value={formData.name}
                      onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Variety">
                    <input
                      type="text"
                      value={formData.variety}
                      onChange={(e) => setFormData({ ...formData, variety: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Date to Sow Indoors">
                    <input
                      type="date"
                      value={formData.dateToSowIndoors}
                      onChange={(e) => setFormData({ ...formData, dateToSowIndoors: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Actual Date Sown Indoors">
                    <input
                      type="date"
                      value={formData.actualDateSownIndoors}
                      onChange={(e) => setFormData({ ...formData, actualDateSownIndoors: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Date to Transplant">
                    <input
                      type="date"
                      value={formData.dateToTransplant}
                      onChange={(e) => setFormData({ ...formData, dateToTransplant: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Actual Date Transplanted">
                    <input
                      type="date"
                      value={formData.actualDateTransplanted}
                      onChange={(e) => setFormData({ ...formData, actualDateTransplanted: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Date to Direct Sow">
                    <input
                      type="date"
                      value={formData.dateToDirectSow}
                      onChange={(e) => setFormData({ ...formData, dateToDirectSow: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Actual Direct Sown Date">
                    <input
                      type="date"
                      value={formData.actualDirectSownDate}
                      onChange={(e) => setFormData({ ...formData, actualDirectSownDate: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Days to Bloom">
                    <input
                      type="number"
                      value={formData.daysToBloom}
                      onChange={(e) => setFormData({ ...formData, daysToBloom: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Space Needed (inches)">
                    <input
                      type="number"
                      step="0.1"
                      value={formData.spaceNeeded}
                      onChange={(e) => setFormData({ ...formData, spaceNeeded: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Plant Before/After Frost">
                    <select
                      value={formData.beforeAfterFrost}
                      onChange={(e) => setFormData({ ...formData, beforeAfterFrost: e.target.value })}
                      style={{...inputStyle, color: '#000000'}}
                    >
                      <option>Before</option>
                      <option>After</option>
                    </select>
                  </FormField>

                  <FormField label="Height at Maturity (in)">
                    <input
                      type="number"
                      value={formData.heightAtMaturity}
                      onChange={(e) => setFormData({ ...formData, heightAtMaturity: e.target.value })}
                      style={inputStyle}
                    />
                  </FormField>

                  <FormField label="Plot Assignment">
                    <select
                      value={formData.plotAssignment}
                      onChange={(e) => setFormData({ ...formData, plotAssignment: e.target.value })}
                      style={{...inputStyle, background: '#ffffff', color: '#000000'}}
                    >
                      <option value="">Select...</option>
                      <option>Original</option>
                      <option>New</option>
                    </select>
                  </FormField>

                  <FormField label="Succession Sowing?">
                    <select
                      value={formData.successionSowing}
                      onChange={(e) => setFormData({ ...formData, successionSowing: e.target.value })}
                      style={{...inputStyle, background: '#ffffff', color: '#000000'}}
                    >
                      <option>No</option>
                      <option>Yes</option>
                    </select>
                  </FormField>
                </div>

                <div style={{ marginBottom: '1.5rem' }}>
                  <FormField label="Notes">
                    <textarea
                      value={formData.notes}
                      onChange={(e) => setFormData({ ...formData, notes: e.target.value })}
                      rows="3"
                      style={{...inputStyle, background: 'rgba(255, 255, 255, 0.9)', color: '#000000', resize: 'vertical'}}
                    />
                  </FormField>
                </div>

                <div style={{ display: 'flex', gap: '1rem' }}>
                  <button
                    type="submit"
                    style={{
                      padding: '0.75rem 2rem',
                      background: '#90ee90',
                      color: '#1a3a1a',
                      border: 'none',
                      borderRadius: '12px',
                      fontSize: '1rem',
                      fontWeight: 600,
                      cursor: 'pointer'
                    }}
                  >
                    Add Plant
                  </button>
                  <button
                    type="button"
                    onClick={onCancel}
                    style={{
                      padding: '0.75rem 2rem',
                      background: 'rgba(255, 255, 255, 0.1)',
                      color: '#f0f4f0',
                      border: '1px solid rgba(144, 238, 144, 0.3)',
                      borderRadius: '12px',
                      fontSize: '1rem',
                      fontWeight: 600,
                      cursor: 'pointer'
                    }}
                  >
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          );
        }

        function FormField({ label, required, children }) {
          return (
            <div>
              <label style={{
                display: 'block',
                marginBottom: '0.5rem',
                fontSize: '0.9rem',
                color: '#90ee90'
              }}>
                {label}
              </label>
              {children}
            </div>
          );
        }

        const inputStyle = {
          width: '100%',
          padding: '0.75rem',
          background: 'rgba(255, 255, 255, 0.9)',
          border: '1px solid rgba(144, 238, 144, 0.3)',
          borderRadius: '8px',
          color: '#000000',
          fontSize: '1rem'
        };

        function TableView({ plants, onUpdate, onDelete, onCopy, getBloomDate, getPlantingDate, calculateDate, editingId, setEditingId }) {
          const [editData, setEditData] = useState({});

          const startEdit = (plant) => {
            setEditingId(plant.id);
            setEditData(plant);
          };

          const saveEdit = () => {
            onUpdate(editingId, editData);
            setEditingId(null);
            setEditData({});
          };

          const cancelEdit = () => {
            setEditingId(null);
            setEditData({});
          };

          return (
            <div style={{
              background: 'rgba(255, 255, 255, 0.05)',
              backdropFilter: 'blur(10px)',
              borderRadius: '20px',
              padding: '2rem',
              border: '2px solid rgba(144, 238, 144, 0.2)',
              boxShadow: '0 8px 32px rgba(0, 0, 0, 0.3)',
              overflowX: 'auto'
            }}>
              <table style={{ width: '100%', borderCollapse: 'separate', borderSpacing: '0 0.5rem' }}>
                <thead>
                  <tr style={{ color: '#90ee90', fontSize: '0.9rem' }}>
                    <th style={thStyle}>Plant</th>
                    <th style={thStyle}>Variety</th>
                    <th style={thStyle}>Date to Sow Indoors</th>
                    <th style={thStyle}>Actual Date Sown Indoors</th>
                    <th style={thStyle}>Date to Transplant</th>
                    <th style={thStyle}>Actual Date Transplanted</th>
                    <th style={thStyle}>Date to Direct Sow</th>
                    <th style={thStyle}>Actual Direct Sown Date</th>
                    <th style={thStyle}>Days to Bloom</th>
                    <th style={thStyle}>Space (in)</th>
                    <th style={thStyle}>Before/After</th>
                    <th style={thStyle}>Height (in)</th>
                    <th style={thStyle}>Est. Bloom</th>
                    <th style={thStyle}>When to Plant</th>
                    <th style={thStyle}>Plot</th>
                    <th style={thStyle}>Succession?</th>
                    <th style={thStyle}>2nd Planned</th>
                    <th style={thStyle}>2nd Actual</th>
                    <th style={thStyle}>3rd Planned</th>
                    <th style={thStyle}>3rd Actual</th>
                    <th style={thStyle}>Notes</th>
                    <th style={thStyle}>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  {plants.map(plant => (
                    <tr key={plant.id} style={{
                      background: 'rgba(255, 255, 255, 0.05)',
                      transition: 'all 0.3s'
                    }}>
                      {editingId === plant.id ? (
                        <>
                          <td style={tdStyle}>
                            <input
                              value={editData.name}
                              onChange={(e) => setEditData({ ...editData, name: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <input
                              value={editData.variety || ''}
                              onChange={(e) => setEditData({ ...editData, variety: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="date"
                              value={editData.dateToSowIndoors || ''}
                              onChange={(e) => setEditData({ ...editData, dateToSowIndoors: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="date"
                              value={editData.actualDateSownIndoors || ''}
                              onChange={(e) => setEditData({ ...editData, actualDateSownIndoors: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="date"
                              value={editData.dateToTransplant || ''}
                              onChange={(e) => setEditData({ ...editData, dateToTransplant: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="date"
                              value={editData.actualDateTransplanted || ''}
                              onChange={(e) => setEditData({ ...editData, actualDateTransplanted: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="date"
                              value={editData.dateToDirectSow || ''}
                              onChange={(e) => setEditData({ ...editData, dateToDirectSow: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="date"
                              value={editData.actualDirectSownDate || ''}
                              onChange={(e) => setEditData({ ...editData, actualDirectSownDate: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="number"
                              value={editData.daysToBloom || ''}
                              onChange={(e) => setEditData({ ...editData, daysToBloom: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="number"
                              step="0.1"
                              value={editData.spaceNeeded || ''}
                              onChange={(e) => setEditData({ ...editData, spaceNeeded: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <select
                              value={editData.beforeAfterFrost || ''}
                              onChange={(e) => setEditData({ ...editData, beforeAfterFrost: e.target.value })}
                              style={{...editInputStyle, color: '#000000'}}
                            >
                              <option>Before</option>
                              <option>After</option>
                            </select>
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="number"
                              value={editData.heightAtMaturity || ''}
                              onChange={(e) => setEditData({ ...editData, heightAtMaturity: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>{getBloomDate(editData)}</td>
                          <td style={tdStyle}>{getPlantingDate(editData.beforeAfterFrost)}</td>
                          <td style={tdStyle}>
                            <select
                              value={editData.plotAssignment || ''}
                              onChange={(e) => setEditData({ ...editData, plotAssignment: e.target.value })}
                              style={{...editInputStyle, background: '#ffffff', color: '#000000'}}
                            >
                              <option value="">Select...</option>
                              <option>Original</option>
                              <option>New</option>
                            </select>
                          </td>
                          <td style={tdStyle}>
                            <select
                              value={editData.successionSowing || ''}
                              onChange={(e) => setEditData({ ...editData, successionSowing: e.target.value })}
                              style={{...editInputStyle, background: '#ffffff', color: '#000000'}}
                            >
                              <option>No</option>
                              <option>Yes</option>
                            </select>
                          </td>
                          <td style={tdStyle}>
                            {editData.actualDirectSownDate && editData.successionSowing === 'Yes'
                              ? calculateDate(editData.actualDirectSownDate, 7)
                              : ''}
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="date"
                              value={editData.secondSowingActual || ''}
                              onChange={(e) => setEditData({ ...editData, secondSowingActual: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            {editData.actualDirectSownDate && editData.successionSowing === 'Yes'
                              ? calculateDate(editData.actualDirectSownDate, 14)
                              : ''}
                          </td>
                          <td style={tdStyle}>
                            <input
                              type="date"
                              value={editData.thirdSowingActual || ''}
                              onChange={(e) => setEditData({ ...editData, thirdSowingActual: e.target.value })}
                              style={editInputStyle}
                            />
                          </td>
                          <td style={tdStyle}>
                            <textarea
                              value={editData.notes || ''}
                              onChange={(e) => setEditData({ ...editData, notes: e.target.value })}
                              rows="2"
                              style={{...editInputStyle, background: 'rgba(255, 255, 255, 0.9)', color: '#000000', resize: 'vertical'}}
                            />
                          </td>
                          <td style={tdStyle}>
                            <div style={{ display: 'flex', gap: '0.5rem' }}>
                              <button onClick={saveEdit} style={iconButtonStyle}>
                                <Check size={16} />
                              </button>
                              <button onClick={cancelEdit} style={iconButtonStyle}>
                                <X size={16} />
                              </button>
                            </div>
                          </td>
                        </>
                      ) : (
                        <>
                          <td style={tdStyle}><strong>{plant.name}</strong></td>
                          <td style={tdStyle}>{plant.variety}</td>
                          <td style={tdStyle}>{plant.dateToSowIndoors}</td>
                          <td style={tdStyle}>{plant.actualDateSownIndoors}</td>
                          <td style={tdStyle}>{plant.dateToTransplant}</td>
                          <td style={tdStyle}>{plant.actualDateTransplanted}</td>
                          <td style={tdStyle}>{plant.dateToDirectSow}</td>
                          <td style={tdStyle}>{plant.actualDirectSownDate}</td>
                          <td style={tdStyle}>{plant.daysToBloom}</td>
                          <td style={tdStyle}>{plant.spaceNeeded}</td>
                          <td style={tdStyle}>{plant.beforeAfterFrost}</td>
                          <td style={tdStyle}>{plant.heightAtMaturity}</td>
                          <td style={tdStyle}>{getBloomDate(plant)}</td>
                          <td style={tdStyle}>{getPlantingDate(plant.beforeAfterFrost)}</td>
                          <td style={tdStyle}>{plant.plotAssignment}</td>
                          <td style={tdStyle}>{plant.successionSowing}</td>
                          <td style={tdStyle}>
                            {plant.actualDirectSownDate && plant.successionSowing === 'Yes'
                              ? calculateDate(plant.actualDirectSownDate, 7)
                              : ''}
                          </td>
                          <td style={tdStyle}>{plant.secondSowingActual}</td>
                          <td style={tdStyle}>
                            {plant.actualDirectSownDate && plant.successionSowing === 'Yes'
                              ? calculateDate(plant.actualDirectSownDate, 14)
                              : ''}
                          </td>
                          <td style={tdStyle}>{plant.thirdSowingActual}</td>
                          <td style={tdStyle}>{plant.notes}</td>
                          <td style={tdStyle}>
                            <div style={{ display: 'flex', gap: '0.5rem' }}>
                              <button onClick={() => onCopy(plant)} style={iconButtonStyle} title="Copy plant">
                                <Copy size={16} />
                              </button>
                              <button onClick={() => startEdit(plant)} style={iconButtonStyle} title="Edit plant">
                                <Edit2 size={16} />
                              </button>
                              <button onClick={() => onDelete(plant.id)} style={iconButtonStyle} title="Delete plant">
                                <Trash2 size={16} />
                              </button>
                            </div>
                          </td>
                        </>
                      )}
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          );
        }

        function CalendarView({ plants, getBloomDate, getPlantingDate }) {
          const today = new Date();
          const months = [];
          
          for (let i = 0; i < 8; i++) {
            const date = new Date(today.getFullYear(), today.getMonth() + i, 1);
            months.push(date);
          }

          const getEventsForMonth = (month) => {
            const events = [];
            plants.forEach(plant => {
              const bloomDate = getBloomDate(plant);
              const plantDate = getPlantingDate(plant.beforeAfterFrost);
              
              if (bloomDate) {
                const bloom = new Date(bloomDate);
                if (bloom.getMonth() === month.getMonth() && bloom.getFullYear() === month.getFullYear()) {
                  events.push({ type: 'bloom', plant: plant.name, date: bloomDate });
                }
              }
              
              if (plantDate) {
                const plant_d = new Date(plantDate);
                if (plant_d.getMonth() === month.getMonth() && plant_d.getFullYear() === month.getFullYear()) {
                  events.push({ type: 'plant', plant: plant.name, date: plantDate });
                }
              }

              if (plant.actualDirectSownDate) {
                const sown = new Date(plant.actualDirectSownDate);
                if (sown.getMonth() === month.getMonth() && sown.getFullYear() === month.getFullYear()) {
                  events.push({ type: 'sown', plant: plant.name, date: plant.actualDirectSownDate });
                }
              }
            });
            
            return events.sort((a, b) => new Date(a.date) - new Date(b.date));
          };

          return (
            <div style={{
              display: 'grid',
              gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',
              gap: '1.5rem'
            }}>
              {months.map((month, idx) => {
                const events = getEventsForMonth(month);
                return (
                  <div key={idx} style={{
                    background: 'rgba(255, 255, 255, 0.05)',
                    backdropFilter: 'blur(10px)',
                    borderRadius: '20px',
                    padding: '1.5rem',
                    border: '2px solid rgba(144, 238, 144, 0.2)',
                    boxShadow: '0 8px 32px rgba(0, 0, 0, 0.3)'
                  }}>
                    <h3 style={{
                      margin: '0 0 1rem 0',
                      color: '#90ee90',
                      fontSize: '1.4rem',
                      fontWeight: 600
                    }}>
                      {month.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}
                    </h3>
                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>
                      {events.length === 0 ? (
                        <p style={{ color: 'rgba(240, 244, 240, 0.5)', fontStyle: 'italic' }}>No events</p>
                      ) : (
                        events.map((event, i) => (
                          <div key={i} style={{
                            padding: '0.75rem',
                            background: event.type === 'bloom'
                              ? 'rgba(255, 182, 193, 0.2)'
                              : event.type === 'plant'
                              ? 'rgba(144, 238, 144, 0.2)'
                              : 'rgba(173, 216, 230, 0.2)',
                            borderRadius: '8px',
                            borderLeft: `4px solid ${
                              event.type === 'bloom'
                                ? '#ffb6c1'
                                : event.type === 'plant'
                                ? '#90ee90'
                                : '#add8e6'
                            }`
                          }}>
                            <div style={{ fontSize: '0.85rem', opacity: 0.8, marginBottom: '0.25rem' }}>
                              {new Date(event.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}
                            </div>
                            <div style={{ fontWeight: 600 }}>{event.plant}</div>
                            <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>
                              {event.type === 'bloom' ? 'ðŸŒ¸ Bloom' : event.type === 'plant' ? 'ðŸŒ± Plant' : 'ðŸŒ¾ Sow'}
                            </div>
                          </div>
                        ))
                      )}
                    </div>
                  </div>
                );
              })}
            </div>
          );
        }

        const thStyle = {
          padding: '1rem',
          textAlign: 'left',
          fontWeight: 600,
          fontSize: '0.85rem',
          textTransform: 'uppercase',
          letterSpacing: '0.05em'
        };

        const tdStyle = {
          padding: '1rem',
          fontSize: '0.95rem'
        };

        const editInputStyle = {
          width: '100%',
          padding: '0.5rem',
          background: 'rgba(255, 255, 255, 0.9)',
          border: '1px solid rgba(144, 238, 144, 0.3)',
          borderRadius: '6px',
          color: '#000000',
          fontSize: '0.9rem'
        };

        const iconButtonStyle = {
          padding: '0.5rem',
          background: 'rgba(144, 238, 144, 0.2)',
          border: 'none',
          borderRadius: '6px',
          color: '#90ee90',
          cursor: 'pointer',
          transition: 'all 0.2s'
        };

        ReactDOM.render(<GardenTracker />, document.getElementById('root'));
    </script>
</body>
</html>
